# Transactions, ACID Properties & Concurrency in DBMS

---

## What is a Transaction in DBMS?

A **transaction** is a single logical unit of work performed on a database.

* It may contain one or more operations
* These operations are treated as one complete unit
* Either all operations succeed, or none of them are applied

### Simple Definition

A transaction is a sequence of database operations that must be executed completely or not at all.

---

## Real-Life Example of a Transaction

### ATM Money Withdrawal

You withdraw **₹5,000** from an ATM.

Behind the scenes, the database performs these steps:

1. Check your account balance
2. Deduct ₹5,000 from your account
3. Dispense cash
4. Update transaction record

All these steps together form **one transaction**.

If any one step fails (for example, cash is not dispensed):

* The entire transaction must be cancelled
* Your money should **not** be deducted

---

## Database Example of a Transaction

### Bank Transfer Example

Transfer **₹1,000** from Account A to Account B

```
T1:
1. Read balance of A
2. A = A - 1000
3. Write balance of A
4. Read balance of B
5. B = B + 1000
6. Write balance of B
```

This entire sequence is **one transaction (T1)**.

* If step 6 fails → step 2 must be undone
* Partial execution is not allowed

---

## Why Do We Need Transactions?

Transactions are needed to protect the database from inconsistency and errors.

### Problems Without Transactions

* Partial updates may occur
* Data can become incorrect
* Money may be lost in banking systems
* Database can reach an invalid state

### Transactions Ensure

* Data consistency
* Correct execution
* Recovery from failures
* Safe concurrent access

Transactions are critical in:

* Banking systems
* Railway / flight booking
* E-commerce payments
* Financial or critical applications

---

## Transaction States in DBMS

A transaction passes through different states during its lifetime. These states describe what is happening at each step.

---

### 1. Active State

**Meaning**

* Transaction is currently executing
* Read and write operations are being performed
* No error has occurred yet

**Example**

```
T1: Read(A)
T1: A = A - 1000
```

Transaction **T1 is Active**

---

### 2. Partially Committed State

**Meaning**

* Last statement of transaction has executed
* Changes are not yet permanently saved
* Rollback is still possible

**Example**

```
T1: Write(B)
```

All operations are done, but final confirmation is pending

---

### 3. Committed State

**Meaning**

* Transaction completed successfully
* All changes are permanently saved
* Cannot be undone

**Example**

* Money transfer completed successfully
* Account balances updated permanently

Once committed:

* Even a system crash will not lose data

---

### 4. Failed State

**Meaning**

* Error occurs and transaction cannot continue

**Possible Reasons**

* System crash
* Power failure
* Disk error
* Logical error (e.g., insufficient balance)

**Example**

* ATM cash not dispensed
* Server crashes during execution

---

### 5. Aborted State

**Meaning**

* Transaction is rolled back
* All changes are undone
* Database restored to previous consistent state

**Example**

* ₹1,000 deducted from A but credit to B failed
* Deduction from A is undone

---

### 6. Terminated / End State

**Meaning**

* Transaction has finished its life cycle
* Reached after commit or abort
* No further operations possible

---

## Transaction State Flow

### Successful Transaction

```
Active → Partially Committed → Committed → Terminated
```

### Failed Transaction

```
Active → Failed → Aborted → Terminated
```

---

## Quick Summary Table

| State               | Meaning                   |
| ------------------- | ------------------------- |
| Active              | Transaction is executing  |
| Partially Committed | Last statement executed   |
| Committed           | Changes saved permanently |
| Failed              | Error occurred            |
| Aborted             | Changes rolled back       |
| Terminated          | Transaction finished      |

---

## Key Takeaway (Transactions)

* A transaction is a complete unit of work
* Ensures correctness, safety, and consistency
* Either everything happens, or nothing happens

---

# ACID Properties in DBMS

ACID properties ensure that transactions are processed reliably.

**ACID stands for:**

* Atomicity
* Consistency
* Isolation
* Durability

---

## 1. Atomicity (All or Nothing)

**Meaning**

* Transaction must execute completely or not at all
* No partial execution allowed

**Bank Transfer Example**

* Debit ₹1,000 from A
* Credit ₹1,000 to B

If credit fails:

* Debit must be undone

Without Atomicity:

* Money deducted but not credited
* Data becomes incorrect

---

## 2. Consistency (Valid State to Valid State)

**Meaning**

* Database moves from one valid state to another
* All rules and constraints must be satisfied

**Example Rule**

* Account balance cannot be negative

**Violation Example**

* Balance = 500
* Withdraw = 1000

Transaction rejected to maintain consistency

---

## 3. Isolation (No Interference)

**Meaning**

* Concurrent transactions do not affect each other
* Each transaction behaves as if it runs alone

**Example**

* T1 withdraws money
* T2 checks balance

T2 should not see partial updates made by T1

---

## 4. Durability (Permanent Data)

**Meaning**

* Once committed, changes are permanent
* Data survives system crashes

**Example**

* Transaction committed
* Power failure occurs
* Data remains safe after restart

---

## ACID Properties – ATM Example

| Property    | Explanation                      |
| ----------- | -------------------------------- |
| Atomicity   | Debit and cash dispense together |
| Consistency | Balance never negative           |
| Isolation   | No partial data visible          |
| Durability  | Data permanent after commit      |

---

## Quick Memory Trick

* Atomicity → All or nothing
* Consistency → Rules followed
* Isolation → No interference
* Durability → Data never lost

---

## Summary Table (ACID)

| Property    | Purpose                       |
| ----------- | ----------------------------- |
| Atomicity   | Prevents partial transactions |
| Consistency | Maintains correctness         |
| Isolation   | Prevents interference         |
| Durability  | Protects committed data       |

---

## Final Takeaway (ACID)

* ACID makes transactions reliable
* Essential for banking, payments, and bookings
* Supported by all major DBMS

---

# Concurrency in DBMS

## What is Concurrency?

Concurrency means multiple transactions executing at the same time on a database.

### Why Concurrency Exists

* Many users access databases simultaneously
* Improves performance
* Reduces waiting time

---

## Real-Life Example of Concurrency

* Person A withdraws ₹3,000
* Person B checks balance
* Both happen at the same time

Without control, balance may become incorrect

---

## Database Example of Concurrency

Initial Balance = ₹5,000

```
T1: Withdraw ₹1,000
T2: Withdraw ₹2,000
```

Both execute concurrently

---

## Why Concurrency is Needed

* Databases are shared
* Sequential execution is slow
* Systems handle thousands of requests

Concurrency introduces problems if not controlled

---

## Problems Caused by Concurrency

---

### 1. Lost Update Problem

**Meaning**

* One transaction overwrites another’s update

**Example**

```
Initial balance = 1000
T1 reads 1000
T2 reads 1000
T1 writes 1500
T2 writes 700
```

Final balance = 700 (Incorrect)

Correct balance = 1200

---

### 2. Dirty Read Problem

**Meaning**

* Reading uncommitted data

**Example**

```
T1 deducts 2000 (not committed)
T2 reads reduced balance
T1 rolls back
```

T2 used invalid data

---

### 3. Non-Repeatable Read Problem

**Meaning**

* Same data read twice gives different values

**Example**

```
T1 reads balance = 4000
T2 updates and commits
T1 reads again = 5000
```

---

### 4. Phantom Read Problem

**Meaning**

* New rows appear in repeated query

**Example**

```
T1: SELECT * FROM Orders WHERE Amount > 600
T2: INSERT new row
T1 executes query again
```

New row appears like a ghost

---

## Summary Table (Concurrency Problems)

| Problem             | Description                   |
| ------------------- | ----------------------------- |
| Lost Update         | One update overwrites another |
| Dirty Read          | Reads uncommitted data        |
| Non-Repeatable Read | Same row, different values    |
| Phantom Read        | New rows appear               |

---

## Key Takeaways (Concurrency)

* Concurrency improves performance
* Causes anomalies without control
* Solved using:

  * Isolation levels
  * Locks
  * Concurrency control protocols

---

**END OF README**
